<!DOCTYPE html>
<html>
	<head>
		<title>Download Button Test</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<style>
			body {
				font-family: Arial, sans-serif;
				padding: 20px;
				background: #f0f0f0;
			}
			.test-section {
				background: white;
				padding: 20px;
				margin: 20px 0;
				border-radius: 8px;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			}
			.iframe-container {
				border: 2px solid #ccc;
				border-radius: 8px;
				overflow: hidden;
				margin: 20px 0;
			}
			iframe {
				width: 100%;
				height: 400px;
				border: none;
			}
			button {
				background: #007bff;
				color: white;
				border: none;
				padding: 10px 20px;
				border-radius: 4px;
				cursor: pointer;
				margin: 5px;
			}
			button:hover {
				background: #0056b3;
			}
		</style>
	</head>
	<body>
		<h1>Download Button Test</h1>

		<div class="test-section">
			<h2>Test 1: Direct Page (Should show download button)</h2>
			<p>This page should show the download button since it's not in an iframe.</p>
			<button onclick="testCreateDownloadButton()">Test Create Download Button</button>
			<button onclick="testIsInIframe()">Test isInIframe()</button>
			<button onclick="testIsSafariMobile()">Test isSafariMobile()</button>
		</div>

		<div class="test-section">
			<h2>Test 2: Iframe Test (Should NOT show download button)</h2>
			<p>The sketch below is in an iframe, so it should NOT show the download button.</p>
			<div class="iframe-container">
				<iframe src="index.html"></iframe>
			</div>
		</div>

		<script src="./library/utils/utils.js"></script>
		<script>
			function testCreateDownloadButton() {
				if (typeof createDownloadButton === "function") {
					createDownloadButton();
					console.log("Download button created");
				} else {
					console.log("createDownloadButton function not found");
				}
			}

			function testIsInIframe() {
				if (typeof isInIframe === "function") {
					const result = isInIframe();
					console.log("isInIframe():", result);
					alert("isInIframe(): " + result);
				} else {
					console.log("isInIframe function not found");
				}
			}

			function testIsSafariMobile() {
				if (typeof isSafariMobile === "function") {
					const result = isSafariMobile();
					console.log("isSafariMobile():", result);
					alert("isSafariMobile(): " + result);
				} else {
					console.log("isSafariMobile function not found");
				}
			}

			// Auto-create download button when page loads
			window.addEventListener("load", () => {
				setTimeout(() => {
					if (typeof createDownloadButton === "function") {
						createDownloadButton();
					}
				}, 1000);
			});
		</script>
	</body>
</html>
